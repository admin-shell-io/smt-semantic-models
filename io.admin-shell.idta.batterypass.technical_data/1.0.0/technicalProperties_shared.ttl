######################################################################
# Copyright (c) 2025 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2025 Industrial Digital Twin Association
#
# This work  is made available under the terms of the
# Creative Commons Attribution 4.0 International (CC BY 4.0) license,
# which is available at
# https://creativecommons.org/licenses/by/4.0/.
# SPDX-License-Identifier: CC-BY-4.0
#
# elements of namespace: urn:samm:io.BatteryPass.Performance:1.2.1 
# and urn:samm:io.BatteryPass.GeneralProductInformation:1.2.0
# within https://github.com/batterypass/BatteryPassDataModel
# with licence CC-BY-4.0
# and Copyright (c) 2025 Circulor GmbH on behalf of the Battery Pass Consortium
# are used but enhanced, adapted or changed to be compliant with DIN DKE SPEC 99100 
# and to align with existing IDTA sub model templates
#
#######################################################################


@prefix samm: <urn:samm:org.eclipse.esmf.samm:meta-model:2.1.0#> .
@prefix samm-c: <urn:samm:org.eclipse.esmf.samm:characteristic:2.1.0#> .
@prefix samm-e: <urn:samm:org.eclipse.esmf.samm:entity:2.1.0#> .
@prefix unit: <urn:samm:org.eclipse.esmf.samm:unit:2.1.0#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix : <urn:samm:io.admin-shell.idta.batterypass.technical_data:1.0.0#> .
@prefix tech: <urn:samm:io.admin-shell.idta.generic.technical_data:2.0.0#> .
@prefix shared: <urn:samm:io.admin-shell.idta.shared:3.1.0#> .
@prefix nameplate: <urn:samm:io.admin-shell.idta.digital_nameplate:3.0.0#> .
@prefix bp: <urn:samm:io.BatteryPass.Performance:1.2.1#> .
@prefix bpg: <urn:samm:io.BatteryPass.GeneralProductInformation:1.2.0#> .


:TechnicalAttributes a samm:Entity ;
  samm:properties (  
    [ samm:property :capacityEnergyVoltage; samm:payloadName "CapacityEnergyVoltage" ] 
    [ samm:property :roundTripEnergyEfficiency; samm:payloadName "RoundTripEnergyEfficiency" ] 
	[ samm:property :resistance; samm:payloadName "Resistance" ] 
    [ samm:property :powerCapability; samm:payloadName "PowerCapability" ] 
	[ samm:property :temperature; samm:payloadName "Temperature" ] 
    [ samm:property :lifetime; samm:payloadName "Lifetime" ]
   ) .

:capacityEnergyVoltage a samm:Property ;
  samm:preferredName "capacity, energy and voltage"@en ;
  samm:description "Information on battery capacity, energy and voltage.\n\nDIN DKE Spec 99100 chapter reference: 6.7.2"@en ;
  samm:characteristic :CapacityEnergyVoltageCharacteristic .

:CapacityEnergyVoltageCharacteristic a samm-c:SingleEntity ;
   samm:dataType :CapacityEnergyVoltage .

:CapacityEnergyVoltage a samm:Entity ;
  samm:properties ( 
     [ samm:property :nominalVoltage; samm:payloadName "NominalVoltage" ] 
	 [ samm:property :minimumVoltage; samm:payloadName "MinVoltage" ]
     [ samm:property :maximumVoltage; samm:payloadName "MaxVoltage" ] 
	 [ samm:property :ratedCapacity; samm:payloadName "RatedCapacity" ] 
	 [ samm:property :capacityFade; samm:optional true; samm:payloadName "CapacityFade" ]
	 [ samm:property :ratedEnergy; samm:optional true; samm:payloadName "CertifiedUsableBatteryEnergy" ] 
	 ) .



:roundTripEnergyEfficiency a samm:Property ;
   samm:preferredName "round trip energy efficiency and self-discharge"@en ;
   samm:description "Information regarding round trip energy efficiency.\n\nDIN DKE Spec 99100 chapter reference: 6.7.4"@en ;
   samm:characteristic :RoundTripEnergyEfficiencyCharacteristic .
   
:RoundTripEnergyEfficiencyCharacteristic a samm-c:SingleEntity ;
   samm:dataType :RoundTripEnergyEfficiency .

:RoundTripEnergyEfficiency a samm:Entity ;
  samm:properties ( 
  [ samm:property :initialRoundTripEnergyEfficiency; samm:payloadName "InitialRoundTripEnergyEfficiency" ] 
  [ samm:property :roundTripEfficiencyAt50PercentCycleLife; samm:payloadName "RoundTripEnergyEfficiencyAt50PercentOfCycleLife" ]
  [ samm:property :energyRoundTripEfficiencyFade; samm:optional true; samm:payloadName "EnergyRoundTripEfficiencyFade" ]   
  [ samm:property :initialSelfDischargingRate; samm:optional true; samm:payloadName "InitialSelfDischargingRate" ] 
  ) .

 
:resistance a samm:Property ;
   samm:preferredName "resistance"@en ;
   samm:description "Data elements regarding internal resistance and electrochemical impedance.\n\nDIN DKE Spec 99100 chapter reference: 6.7.5"@en ;
   samm:characteristic :ResistanceCharacteristic .
   
:ResistanceCharacteristic a samm-c:SingleEntity ;
   samm:dataType :Resistance .
   

:Resistance a samm:Entity ;
  samm:properties ( 
  [ samm:property :initialInternalResistanceOfBatteryCell; samm:payloadName "InitialInternalResistanceOfBatteryCellLevel" ] 
  [ samm:property :initialInternalResistanceOfBatteryPack; samm:payloadName "InitialInternalResistanceOfBatteryPackLevel" ] 
  [ samm:property :initialInternalResistanceOfBatteryModule; samm:optional true; samm:payloadName "InitialInternalResistanceOnBatteryModuleLevel" ] 
  [ samm:property :internalResistanceIncreaseOfBatteryCell; samm:optional true; samm:payloadName "InternalResistanceIncreaseOfBatteryCellLevel" ] 
  [ samm:property :internalResistanceIncreaseOfBatteryPack; samm:payloadName "InternalResistanceIncreaseOfBatteryPackLevel" ] 
  [ samm:property :internalResistanceIncreaseOfBatteryModule; samm:optional true; samm:payloadName "InternalResistanceIncreaseOfBatteryModuleLevel" ] 
  ) .
  
  
:powerCapability a samm:Property ;
   samm:preferredName "power capability"@en ;
   samm:description "Information regarding power capability.\n\nDIN DKE Spec 99100 chapter reference: 6.7.3"@en ;
   samm:characteristic :PowerCapabilityCharacteristic .
   
:PowerCapabilityCharacteristic a samm-c:SingleEntity ;
   samm:dataType :PowerCapability .
   

:PowerCapability a samm:Entity ;
  samm:properties ( 
    [ samm:property :maximumPermittedBatteryPower; samm:payloadName "MaximumPermittedBatteryPower" ] 
    [ samm:property :powerFade; samm:payloadName "PowerFade" ] 
	[ samm:property :powerCapabilityRatio; samm:payloadName "RatioNominalBatteryPowerAndBatteryEnergy" ]
	[ samm:property :originalPowerCapability; samm:payloadName "OriginalPowerCapability" ] 
  ) .
  
  
:temperature a samm:Property ;
   samm:preferredName "temperature conditions"@en ;
   samm:description "Information regarding temperature conditions.\n\nDIN DKE Spec 99100 chapter reference: 6.7.7"@en ;
   samm:characteristic :TemperatureCharacteristic .
   
:TemperatureCharacteristic a samm-c:SingleEntity ;
   samm:dataType :Temperature .
   

:Temperature a samm:Entity ;
  samm:properties ( 
  [ samm:property :temperatureRangeIdleStateLowerBoundary; samm:payloadName "TemperatureRangeIdleState_LowerBoundary" ]  
  [ samm:property :temperatureRangeIdleStateUpperBoundary; samm:payloadName "TemperatureRangeIdleState_UpperBoundary" ] 
  ) .
  
:lifetime a samm:Property ;
   samm:preferredName "battery lifetime"@en ;
   samm:description "Information regarding battery lifetime.\n\nDIN DKE Spec 99100 chapter reference: 6.7.6"@en ;
   samm:characteristic :LifetimeCharacteristic .
   
:LifetimeCharacteristic a samm-c:SingleEntity ;
   samm:dataType :Lifetime .
   

:Lifetime a samm:Entity ;
  samm:properties ( 
      [ samm:property :expectedLifetime; samm:payloadName "ExpectedLifetimeInCalendarYears " ] 
	  [ samm:property :expectedNumberOfCycles; samm:payloadName "ExpectedNumberOfCycles" ] 
      [ samm:property :capacityThresholdForExhaustion; samm:payloadName "CapacityThresholdExhaustion" ] 
      [ samm:property :cRateLifeCycleTest; samm:payloadName "CrateOfRelevantCycleLifeTest" ] 
  ) .
  

:originalPowerCapability a samm:Property ;
   samm:see <urn:irdi:0173-1#02-ABL853#002> ;
   samm:preferredName "original power capability"@en ;
   samm:description "List of pre-use power capabilities (definition of power capability as given in Battery Regulation).\n\n Power capability shall be measured at reference conditions, which must include measurements at 80% and 20% state of charge for EV and industrial batteries. \n\nDIN DKE Spec 99100 chapter reference: 6.7.3.2\n\n"@en ;
   samm:characteristic :PowerCapabilityAtSoCTrait .

:PowerCapabilityAtSoCTrait a samm-c:Trait ;
   samm-c:baseCharacteristic :PowerCapabilityAtSoC;
   samm-c:constraint shared:CardinalityOneToMany .  
 
:PowerCapabilityAtSoC a samm-c:List ;
   samm-c:elementCharacteristic :PowerCapabilityAtCharacteristic .
   
:PowerCapabilityAtCharacteristic a samm:Characteristic ;
  samm:dataType :PowerCapabilityAt .
 
:PowerCapabilityAt a samm:Entity ;
   samm:preferredName "power capability at reference condition"@en ;
   samm:description "Power capability measured at a reference condition, for example at 80% or 20% state of charge (SoC).\n\nDIN DKE Spec 99100 chapter reference: 6.7.3.2"@en ;
   samm:properties ( 
   :atSoC 
   :powerCapabilityAt 
   ) .